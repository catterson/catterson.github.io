{
  "hash": "f53aef8f72f2f2815fa6d5cf1549460f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lecture 12 | More Multilevel Models (MLM) and Not An Exam Debrief\"\nformat: \n  html:\n      code-overflow: wrap\n---\n\n\n\n## [Check-In : Multilevel Models (MLM)](https://docs.google.com/forms/d/e/1FAIpQLSfmtiyG6zXo_pgGLYempKtsyWhZdWDENCQYCCmHKuQ1sTdLuQ/viewform?usp=header)\n\n-   Some code is below that I will run, but we won't see the output of.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lme4)\nlibrary(ggplot2)\nlibrary(ggthemes)\n\n## Dataset : Wide Format\ndw <- read.csv(\"~/Desktop/grad_class_wide.csv\", stringsAsFactors = T)\n\n## Converting Wide to Long Format\ndl <- dw %>%\n  pivot_longer(\n    cols = c(starts_with(\"HowGoing\"), starts_with(\"LoveR\")),\n    names_to = c(\".value\", \"Timepoint\"),\n    names_pattern = \"(HowGoing|LoveR)(\\\\d+)\"\n  )\ndl <- dl[,c(1, 12:14)]\nd <- dl\n\n## Some Data Cleaning\nd$Username <- as.factor(d$Username)\nd$Timepoint <- as.numeric(d$Timepoint)\n```\n:::\n\n\n\n-   Okay, it's modeling time.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](12_MLM2_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear mixed model fit by REML ['lmerMod']\nFormula: HowGoing ~ Timepoint + (Timepoint | Username)\n   Data: d\n\nREML criterion at convergence: 839.5\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.0948 -0.4597  0.1015  0.4900  3.8208 \n\nRandom effects:\n Groups   Name        Variance Std.Dev. Corr \n Username (Intercept) 0.58001  0.7616        \n          Timepoint   0.01546  0.1243   -0.16\n Residual             1.75949  1.3265        \nNumber of obs: 230, groups:  Username, 28\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)  6.88277    0.23215  29.648\nTimepoint   -0.15593    0.03972  -3.926\n\nCorrelation of Fixed Effects:\n          (Intr)\nTimepoint -0.597\n```\n\n\n:::\n:::\n\n\n\n-   Check-In Stuff stops here.\n\n### Some More Thoughts and Comments on MLM\n\n-   Converting Data from Wide to Long\n\n    -   **Wide Format :** Each repeated measure is its own column; each row is an individual.\n\n        ![](images/clipboard-2798629359.png)\n\n    -   **Long Format :** Each row is an individual observation; each column is a variable.\n\n        -   **fixed effects :** repeat across rows (e.g., username; demographic & personality and other *between-person* variables)\n\n        -   **random effects :** change across rows (e.g., mood; emotion; reaction times; other *within-person* variables)\n\n            ![](images/clipboard-2900539411.png){width=\"185\"}\n\n    -   **Often need to convert wide to long;** it's a pain. Professor Used ChatGPT for This :( and it was easier :)\n\n    ![](images/clipboard-967868589.png)\n\n-   **Reporting the Results of MLM : It Gets Complicated**\n\n    -   What fixed vs. random effects to include?\n\n    -   Random effects can be averaged into fixed effects, and both can be included in the model.\n\n        -   a person's mood varies over the day (random effect)\n\n        -   the person's mood tends to be higher than another person's (fixed effect)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# the modelsummary function : https://francish.net/mlmusingr/MLM_Appendix_A.pdf\n# install.packages(\"modelsummary\")\nlibrary(modelsummary)\nmodelsummary(list(\"Random Intercept Model\" = mlm, \"Random Intercept\\nFixed Slope Model\" = mlm2, \"Random Intercept\\nRandom Slope Model\" = mlm3), \n             stars = TRUE,\n             title = \"Multilevel Model Regression Example\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_4y3zeucgfl0mseatp7m3(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_4y3zeucgfl0mseatp7m3\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_4y3zeucgfl0mseatp7m3');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_4y3zeucgfl0mseatp7m3(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_4y3zeucgfl0mseatp7m3\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 15, j: 2 }, { i: 15, j: 1 }, { i: 15, j: 3 },  ], css_id: 'tinytable_css_4wdzmazlfopd1w3462uh',}, \n          { positions: [ { i: 8, j: 3 }, { i: 8, j: 2 }, { i: 8, j: 1 },  ], css_id: 'tinytable_css_mzd49t6bfzo9kene7q1y',}, \n          { positions: [ { i: 1, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 2, j: 1 }, { i: 7, j: 1 }, { i: 5, j: 2 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 12, j: 1 }, { i: 13, j: 1 }, { i: 14, j: 1 }, { i: 12, j: 2 }, { i: 3, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 6, j: 1 }, { i: 4, j: 2 }, { i: 2, j: 3 }, { i: 6, j: 2 }, { i: 7, j: 2 }, { i: 5, j: 3 }, { i: 9, j: 2 }, { i: 10, j: 2 }, { i: 11, j: 2 }, { i: 9, j: 3 }, { i: 13, j: 2 }, { i: 14, j: 2 }, { i: 12, j: 3 }, { i: 3, j: 2 }, { i: 1, j: 3 }, { i: 6, j: 3 }, { i: 3, j: 3 }, { i: 4, j: 3 }, { i: 13, j: 3 }, { i: 10, j: 3 }, { i: 7, j: 3 }, { i: 14, j: 3 }, { i: 11, j: 3 },  ], css_id: 'tinytable_css_anf6abc815mwtqk63969',}, \n          { positions: [ { i: 0, j: 1 }, { i: 0, j: 3 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_ze7mtkqephzmhyhbmd9c',}, \n          { positions: [ { i: 15, j: 0 },  ], css_id: 'tinytable_css_ykxb9l9m0vlk1erules0',}, \n          { positions: [ { i: 8, j: 0 },  ], css_id: 'tinytable_css_p55a5ako4okojife7ugg',}, \n          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 12, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 }, { i: 13, j: 0 }, { i: 14, j: 0 },  ], css_id: 'tinytable_css_1xe6wl19xrp0s2ysjh21',}, \n          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_69mkbwbgkn92ysimcxcd',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_4y3zeucgfl0mseatp7m3(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_4wdzmazlfopd1w3462uh, .table th.tinytable_css_4wdzmazlfopd1w3462uh { text-align: center; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_mzd49t6bfzo9kene7q1y, .table th.tinytable_css_mzd49t6bfzo9kene7q1y { text-align: center; border-bottom: solid black 0.05em; }\n      .table td.tinytable_css_anf6abc815mwtqk63969, .table th.tinytable_css_anf6abc815mwtqk63969 { text-align: center; }\n      .table td.tinytable_css_ze7mtkqephzmhyhbmd9c, .table th.tinytable_css_ze7mtkqephzmhyhbmd9c { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n      .table td.tinytable_css_ykxb9l9m0vlk1erules0, .table th.tinytable_css_ykxb9l9m0vlk1erules0 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_p55a5ako4okojife7ugg, .table th.tinytable_css_p55a5ako4okojife7ugg { text-align: left; border-bottom: solid black 0.05em; }\n      .table td.tinytable_css_1xe6wl19xrp0s2ysjh21, .table th.tinytable_css_1xe6wl19xrp0s2ysjh21 { text-align: left; }\n      .table td.tinytable_css_69mkbwbgkn92ysimcxcd, .table th.tinytable_css_69mkbwbgkn92ysimcxcd { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_4y3zeucgfl0mseatp7m3\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        <caption>Multilevel Model Regression Example</caption>\n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">Random Intercept Model</th>\n                <th scope=\"col\">Random Intercept\nFixed Slope Model</th>\n                <th scope=\"col\">Random Intercept\nRandom Slope Model</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='4'>+ p < 0.1, * p < 0.05, ** p < 0.01, *** p < 0.001</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td>(Intercept)</td>\n                  <td>6.107***</td>\n                  <td>6.862***</td>\n                  <td>6.883***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.197)</td>\n                  <td>(0.254)</td>\n                  <td>(0.232)</td>\n                </tr>\n                <tr>\n                  <td>Timepoint</td>\n                  <td></td>\n                  <td>-0.149***</td>\n                  <td>-0.156***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td></td>\n                  <td>(0.032)</td>\n                  <td>(0.040)</td>\n                </tr>\n                <tr>\n                  <td>SD (Intercept Username)</td>\n                  <td>0.897</td>\n                  <td>0.908</td>\n                  <td>0.762</td>\n                </tr>\n                <tr>\n                  <td>SD (Timepoint Username)</td>\n                  <td></td>\n                  <td></td>\n                  <td>0.124</td>\n                </tr>\n                <tr>\n                  <td>Cor (Intercept~Timepoint Username)</td>\n                  <td></td>\n                  <td></td>\n                  <td>-0.161</td>\n                </tr>\n                <tr>\n                  <td>SD (Observations)</td>\n                  <td>1.443</td>\n                  <td>1.374</td>\n                  <td>1.326</td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.</td>\n                  <td>230</td>\n                  <td>230</td>\n                  <td>230</td>\n                </tr>\n                <tr>\n                  <td>R2 Marg.</td>\n                  <td>0.000</td>\n                  <td>0.064</td>\n                  <td>0.069</td>\n                </tr>\n                <tr>\n                  <td>R2 Cond.</td>\n                  <td>0.279</td>\n                  <td>0.349</td>\n                  <td>0.400</td>\n                </tr>\n                <tr>\n                  <td>AIC</td>\n                  <td>866.7</td>\n                  <td>852.7</td>\n                  <td>851.5</td>\n                </tr>\n                <tr>\n                  <td>BIC</td>\n                  <td>877.1</td>\n                  <td>866.5</td>\n                  <td>872.2</td>\n                </tr>\n                <tr>\n                  <td>ICC</td>\n                  <td>0.3</td>\n                  <td>0.3</td>\n                  <td>0.4</td>\n                </tr>\n                <tr>\n                  <td>RMSE</td>\n                  <td>1.38</td>\n                  <td>1.30</td>\n                  <td>1.24</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n## Not an Exam Debrief\n\n### Activity and Discussion : Debrief of Team Work\n\n-   [**One Dataset (and Psych 205 Assignment)**](https://docs.google.com/document/d/1qGXXwLUf7fiEKhhJ5ur-FkNUHDyLfrhjdPcSosrsAZw/edit?usp=sharing)\n\n    -   **Our Class Analyses**\n\n    -   [**29 Teams; 61 Analysts**](https://osf.io/qix4g/files/osfstorage) **:** Each team did what y'all did.\n\n-   **Activity : Round Robin Peer Review**\n\n    -   [**Step 1 :** Visit this Google Sheet](https://docs.google.com/spreadsheets/d/11Ftod8PNXqlYVVTQ5a1ImtbXary4vIIMpfPwQv3zG2E/edit?usp=sharing)\n\n    -   **Step 2 :** Find your name; share your early ATHLETIC EXPERIENCES (growth mindset etc. etc.); then use the [OSF LINK HERE](https://osf.io/qix4g/files/osfstorage) to find your Assigned Team's report.\n\n    -   **Step 3 :** Skim / review the report; fill out the columns for the below questions.\n\n        -   **Data Cleaning This Team Did for Red Card Variable.**\n\n            -   Was this what you did? Something similar? Radically different? Something you've never heard of and might want to look into later?\n\n        -   **Data Cleaning This Team Did for Race Variable.**\n\n        -   **Type of Model They Used**.\n\n        -   **What was the effect (was darker skin related to more or less red cards? Was this significant?)**\n\n        -   **Questions or Comments You Had About The Team's Approach** (e.g., what would you want / need to learn more about? Was there something cool they did that we should know about?)\n\n    -   **Step 4 :** Work with the members of your table to share your knowledge.\n\n        -   What did the assigned team you read about do and find?\n\n        -   What did you do and find?\n\n        -   What changes might you make to your own analyses based on what others have done?\n\n![](images/clipboard-290001262.png){fig-align=\"center\"}\n\n### Original Article :\n\n**Full Article :** [Silberzahn R, Uhlmann EL, Martin DP, et al. Many Analysts, One Data Set: Making Transparent How Variations in Analytic Choices Affect Results. Advances in Methods and Practices in Psychological Science. 2018;1(3):337-356. doi:10.1177/2515245917747646](https://journals.sagepub.com/doi/epub/10.1177/2515245917747646)\n\n-   **Miscellaneous Materials :**\n\n    -   [OSF Files](https://osf.io/un3e5/files/osfstorage)\n\n    -   [Original Google Doc I adapted for your exam](https://docs.google.com/document/d/1uCF5wmbcL90qvrk_J27fWAvDcDNrO9o_APkicwRkOKc/edit?tab=t.0)\n\n-   **Authors & Agenda :** Part of the \"Open Science\" movement. Goal to develop better and more transparent systems of science.\n\n![](images/clipboard-3837998832.png)\n\n-   **Key Findings :**\n\n![](images/clipboard-755498918.png)\n\n-   **Discussion Questions :**\n\n    -   What practices can we carry into our own research?\n\n    -   What else seems relevant or important about the paper / this project?\n\n## [Presentation](https://docs.google.com/presentation/d/1YZQ45_oj6TgiSIUpU7N6Ek5iTk2nn4T5RIpCz6Xi1K4/edit?usp=sharing)\n\n## More MLM\n\n## Next Week : Final Project Draft (and PIZZA)\n\n-   **Put together a summary graph (or table) that illustrates some of the main ideas.** If there was ONE PAGE to show people about your project, what would you put on that page?\n\n    -   Make it something people WANT to look at and can LEARN from.\n\n    -   No tiny font and giant margins!\n\n    -   People will remember 1-2 things about your project (Â± 2).\n\n-   **Bring whatever you have :)** but be prepared to chat about your data and project and get feedback.\n\n-   **Psych department is paying (~*says\\ they\\ will\\ reimburse\\ me*~) for a PIZZA PARTY.**\n",
    "supporting": [
      "12_MLM2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}