<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Class 4 | Scales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://catterson.github.io/ystats/"> 
<span class="menu-text">Why Statistics?</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../calstats/calstatsSP25.html"> 
<span class="menu-text">Cal Stats [Psych 101]</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../gradstats/gradstatsSP25.html"> 
<span class="menu-text">Grad Stats [Psych 205]</span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class 4 | Scales</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="check-in-complete-this-survey" class="level2">
<h2 class="anchored" data-anchor-id="check-in-complete-this-survey"><a href="https://forms.gle/HZUTsakNeBEwkMhp7">Check-In : Complete This Survey</a></h2>
<ul>
<li><p>check-in uses mini-data from Lab 3 (in the <a href="https://www.dropbox.com/scl/fo/8j5rj9jz2tycse6ti4fl2/AP8jM5uTJ9lEQTZhJgDjbM4?rlkey=he1rveerbx8w3l4l5z19skon8&amp;dl=0">Dropbox Dataset Folder</a>)</p></li>
<li><p>link to <a href="https://www.dropbox.com/scl/fi/o5atu3at328maoso82bao/4T_Scales.R?rlkey=ecxnjcq27sxfiar3sd5m1a060&amp;dl=0">professor R script</a></p></li>
</ul>
<p><img src="lecture_images/4L_UpsideDragon.png" class="img-fluid quarto-figure quarto-figure-center"> ##</p>
<section id="announcements" class="level3">
<h3 class="anchored" data-anchor-id="announcements">Announcements</h3>
<ul>
<li><p><strong>Mini Exam is in TWO weeks [2/28]</strong></p>
<ul>
<li><p>take home; open-note; open-book; DO ON YOUR OWN.</p></li>
<li><p>held during normal class; 80 minutes (DSP students get extra time accommodations)</p></li>
<li><p>practice exam will post next week</p></li>
<li><p>No new R content after today</p></li>
</ul></li>
<li><p><strong>2/17 is a Holiday</strong></p>
<ul>
<li><p><strong>Monday Sections :</strong> attend extra GSI office hour OR jump to another GSIs section [email them for heads up]; no penalty if you can’t attend / makeup.</p></li>
<li><p><strong>Everyone Else :</strong> Business as Usual.</p></li>
</ul></li>
<li><p><strong>Chapter 5 : Good Science</strong></p>
<ul>
<li><p>Good Knowledge : The Scientific Method in Five <del>Easy</del> Steps</p></li>
<li><p>Good Research : Scientific Articles and Literature Reviews</p></li>
<li><p>Good Measures : Reliability and Validity</p></li>
</ul></li>
</ul>
</section>
<section id="agenda" class="level3">
<h3 class="anchored" data-anchor-id="agenda">Agenda</h3>
<ul>
<li><p>2:10 - 3:00 | Check-In and Week 3 Review</p></li>
<li><p>3:00 - 3:30 | Z-Scores</p></li>
<li><p>3:30 - 3:42 | BREAK TIME</p></li>
<li><p>3:42 - 4:45 | Likert Scales</p></li>
<li><p>4:45 - 5:00 | Project Workshop / Office Hours</p></li>
</ul>
</section>
<section id="professor-check-in-code" class="level3">
<h3 class="anchored" data-anchor-id="professor-check-in-code">Professor Check-In Code</h3>
</section>
<section id="lab-3-review-the-mode" class="level3">
<h3 class="anchored" data-anchor-id="lab-3-review-the-mode">Lab 3 Review : The Mode</h3>
</section>
</section>
<section id="part-1-the-z-score-scale-function" class="level2">
<h2 class="anchored" data-anchor-id="part-1-the-z-score-scale-function">Part 1 : The Z-Score (Scale Function)</h2>
<section id="recap-what-and-why-z-score" class="level3">
<h3 class="anchored" data-anchor-id="recap-what-and-why-z-score">RECAP : What and Why Z-Score?</h3>
<p><strong>The Z-Score</strong></p>
<ul>
<li><p>distance from the mean</p></li>
<li><p>in units of standard deviation</p></li>
</ul>
<p><strong>Why We Care :</strong></p>
<ul>
<li><p>gives more context for how different an individual score is from other scores.</p>
<ul>
<li><p>example : work for Meta and get paid an above average salary in zuckbucks!!!</p>
<ul>
<li><p>how much above average???</p></li>
<li><p>wtf is a difference of 10? Is that a lot or a little???</p></li>
</ul></li>
<li><p>example : your sleep last night (compared to others)?</p>
<ul>
<li><p>mean sleep = 7</p></li>
<li><p>sd sleep = 1.5</p></li>
<li><p>student with 3 hours of sleep; mean = 7; sd = 1.5 . Z-SCORE = (3 - 7)/1.5</p></li>
</ul></li>
</ul></li>
<li><p>removes the units from a variable :</p>
<ul>
<li><p>mean of a z-scored variable will always be zero</p></li>
<li><p>st of a z-scored variable will always be 1</p></li>
<li><p>all variables described in units of standard deviation In R : The Z-Score</p></li>
</ul></li>
</ul>
</section>
<section id="z-scoring-in-r" class="level3">
<h3 class="anchored" data-anchor-id="z-scoring-in-r">Z-Scoring in R</h3>
<p>You can calculate the z-score manually, or you can use the <code>scale()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Manual Z-Score : distance from the mean / sd</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>mini<span class="sc">$</span>hrs.sleepZM <span class="ot">&lt;-</span> (mini<span class="sc">$</span>hrs.sleep <span class="sc">-</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T))<span class="sc">/</span> <span class="fu">sd</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## The scale() function</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>mini<span class="sc">$</span>hrs.sleepZ <span class="ot">&lt;-</span> <span class="fu">scale</span>(mini<span class="sc">$</span>hrs.sleep) <span class="co"># the z-score transformation</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Comparing these calculations side-by-side</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>zcompare <span class="ot">&lt;-</span> <span class="fu">with</span>(mini, <span class="fu">data.frame</span>(hrs.sleep, hrs.sleepZM, hrs.sleepZ)) <span class="co"># organizing our two variables</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zcompare) <span class="co"># looking at the first few rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  hrs.sleep hrs.sleepZM  hrs.sleepZ
1       7.0 -0.05924517 -0.05924517
2       6.0 -0.73228452 -0.73228452
3       8.0  0.61379417  0.61379417
4       7.5  0.27727450  0.27727450
5        NA          NA          NA
6       7.0 -0.05924517 -0.05924517</code></pre>
</div>
</div>
<p>It might be easier to look at this in graphical form. In the graph below,</p>
<div class="cell">
<details class="code-fold">
<summary>Click Here to Show the Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## A PICTURE IS WORTH 1000 WORDS : Raw Scores vs. Z-Scores</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## REMEMBER : IT IS USUALLY BEST TO USE hist() FOR GRAPHING NUMERIC VARIABLES!</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## I AM USING PLOT TO ILLUSTRATE THE MEAN, STANDARD DEVIATION, AND Z-SCORES.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) <span class="co"># splits the graphics window</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">main =</span> <span class="st">"Hours of Sleep [Raw Units]"</span>, <span class="at">ylab =</span> <span class="st">"Hours of Sleep"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T), <span class="at">lwd =</span> <span class="dv">5</span>) <span class="co"># vertical line of mean</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T) <span class="sc">+</span> <span class="fu">sd</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T), <span class="co"># vertical line of mean + sd</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">'dashed'</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="fu">sd</span>(mini<span class="sc">$</span>hrs.sleep, <span class="at">na.rm =</span> T), <span class="co"># vertical line of mean - sd</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">'dashed'</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Z-SCORED GRAPH. WAIT TO RUN!!!! :)</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">main =</span> <span class="st">"Hours of Sleep [Z-Scores]"</span>, <span class="at">xlab =</span> <span class="st">"Hours of Sleep"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">na.rm =</span> T), <span class="at">lwd =</span> <span class="dv">5</span>) <span class="co"># vertical line of mean</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">na.rm =</span> T) <span class="sc">+</span> <span class="fu">sd</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">na.rm =</span> T), <span class="co"># vertical line of mean + sd</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">'dashed'</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="fu">sd</span>(mini<span class="sc">$</span>hrs.sleepZ, <span class="at">na.rm =</span> T), <span class="co"># vertical line of mean - sd</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">'dashed'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4L_Scales_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Miscelaneous Student Questions and Professor Answers</strong></p>
<ul>
<li>Go Here.</li>
</ul>
</section>
</section>
<section id="part-2-normal-distributions-and-likert-scales" class="level2">
<h2 class="anchored" data-anchor-id="part-2-normal-distributions-and-likert-scales">Part 2 : “Normal” Distributions and Likert Scales</h2>
<section id="recap-the-normal-distribution" class="level3">
<h3 class="anchored" data-anchor-id="recap-the-normal-distribution">RECAP : The Normal Distribution</h3>
<p>We think of psychological constructs as continuous variables :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">array</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)){</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  d[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">replicate</span>(<span class="dv">10</span>, <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dv">1</span>)))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(d, <span class="at">main =</span> <span class="st">"Theoretical Normal Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Self-Esteem"</span>, <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4L_Scales_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We Expect This To Occur When :</p>
<ul>
<li><p>Multiple Explanations for Variation :</p></li>
<li><p>Those Multiple Explanations are Independent :</p></li>
</ul>
<p>Below are Two Examples :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.factor</span>(mini<span class="sc">$</span>selfesteem))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4L_Scales_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="recap-a-likert-scale" class="level3">
<h3 class="anchored" data-anchor-id="recap-a-likert-scale">RECAP : A Likert Scale</h3>
<section id="why-are-we-doing-this" class="level4">
<h4 class="anchored" data-anchor-id="why-are-we-doing-this">Why Are We Doing This?</h4>
<p>The Likert Scale is designed to help approximate a normal distribution, by asking multiple questions about the same variable (Multiple Explanations for Variation!)</p>
<p>Notice, that our single-item measures are not really continuous, but could be considered categories :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.factor</span>(mini<span class="sc">$</span>selfesteem), <span class="at">xlab =</span> <span class="st">"Self-Esteem"</span>, <span class="at">main =</span> <span class="st">"Categories of Self-Esteem"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4L_Scales_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="discussion-evaluate-the-satisfaction-with-life-scale-below" class="level4">
<h4 class="anchored" data-anchor-id="discussion-evaluate-the-satisfaction-with-life-scale-below"><strong>DISCUSSION : Evaluate the Satisfaction With Life Scale [below]</strong></h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcZss3J31ASVtR12xe-FXqfQ0VDv7gD5xJy1VjLwMnQbllB2sSXTorc6z2yYE6ZxLOYJuNzM7Y6L1knT7mxtARK8Jh0tftUCloFunT5eh05mjOB-v6DCnWuGBBFQJfMhSQ3O0akkUPtuTd41xPkvU58tkDb?key=r8XgfFaZOalV_EMC4TmK4A.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<ul>
<li><p><strong>ICE-BREAKER :</strong> Best / worst present you received?</p></li>
<li><p><strong>Describe features that you notice about this scale (try and use the terms we just learned!)</strong></p>
<ul>
<li><p># of items :</p></li>
<li><p>response scale :</p>
<ul>
<li><p>positively keyed items :</p></li>
<li><p>negatively keyed items :</p></li>
</ul></li>
</ul></li>
<li><p><strong>Do you think this is a valid way to measure this construct?</strong></p>
<ul>
<li><p>REASONS NO :</p></li>
<li><p>REASONS YES :</p></li>
</ul></li>
<li><p><strong>How might you use this scale in a study (as an IV or a DV).</strong></p></li>
</ul>
</section>
</section>
<section id="in-r-creating-a-likert-scale" class="level3">
<h3 class="anchored" data-anchor-id="in-r-creating-a-likert-scale">In R : Creating a Likert Scale</h3>
<p>Let’s create a variable about how GOOD people feel. What items from the mini dataset measure this (the high end and / or the low end)?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mini) <span class="co"># looking at the names of our variables.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "pace"            "engaging"        "fb.friends"      "insta.followers"
 [5] "insta.follows"   "bored"           "thirsty"         "tired"          
 [9] "satlife"         "oskilove"        "rlove"           "socialmed.use"  
[13] "class.attention" "hrs.sleep"       "selfpow.data"    "corppow.data"   
[17] "success.work"    "success.priv"    "selfesteem"      "catdog"         
[21] "tuhoburat"       "calgame"         "caffeine"        "breakfast"      
[25] "is.female"       "long.hair"       "has.water"       "shoesize"       
[29] "height"          "happy"           "drink"           "stoned72"       
[33] "multilingual"    "waitlist"        "hrs.sleepZM"     "hrs.sleepZ"     </code></pre>
</div>
</div>
<section id="step-1-organize-and-evaluate-the-item-reliability" class="level4">
<h4 class="anchored" data-anchor-id="step-1-organize-and-evaluate-the-item-reliability">STEP 1 : ORGANIZE AND EVALUATE THE ITEM RELIABILITY</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>HAPPY.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(mini<span class="sc">$</span>happy, mini<span class="sc">$</span>selfesteem, <span class="dv">10</span><span class="sc">-</span>mini<span class="sc">$</span>bored, <span class="dv">10</span><span class="sc">-</span>mini<span class="sc">$</span>tired, mini<span class="sc">$</span>satlife)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>HAPPY.df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    mini.happy mini.selfesteem X10...mini.bored X10...mini.tired mini.satlife
1            8               8                6                4            4
2            8               7                2                0            7
3            6               7                5                3            6
4            8              10                6                2            9
5           NA              NA               NA               NA           NA
6            8               8                3                1            9
7           10              10               10                3           10
8            6               7                3                3            8
9            7               5                4                2            6
10           9               5                2                2           10
11           7               1                7                0            7
12           8               6                6                0            7
13           4               5                4                0            2
14          NA              NA                5                5            8
15           7               6                5                7            7
16           7               7                8                0            6
17           8               8                4                6            8
18           6               8                3                4            6
19           6               7                5                4            8
20           8               7                8                0            8
21           6               8                5                1            4
22           7               4                5                5            7
23           7               8                5                7            9
24           8               3                3                6            7
25           8               8                6                0            9
26           8               7               10                6            8
27           7               7                3                5            6
28          10              10               10                3           10
29           7               7                8                3            6
30          NA               6                3                5            7
31           5               3                6                5            4
32           8               7                5                7            8
33           7               5                9                3            6
34           8               8                0                2            8
35           8               7                2                3            6
36           7               7                3                2            8
37           8               9                6                3            8
38           9               8                8                8            8
39           1               1                3                0            6
40           9               8                8                1            8
41           8               7                2                0            8
42           7               6                5                2            8
43           8               9                7                6            8
44          10              10                5                8            7
45           7               6                8                4            1
46           3               2                7                4            4
47           7               8                2                3            6
48          10               2                6                8            7
49           6               7                5                2            8
50           8               8                3                4            8
51          10              10                4                4           10
52           9               8                0                3            8
53           7               8                5                2            6
54          10               8                6                0           10
55           7               7                7                3            5
56           5               4                4                6            5
57           8               7                2                1            8
58           8               9                2                3            8
59           6               7                0                1            8
60           5               4                7                7            6
61           6               4                6                0            5
62           9               7                8                4            8
63           9               8                6                3            8
64           9               3                4                7            8
65           8               5                3                2            7
66           7               9                3                5            8
67           5               5                5                1            4
68           8               8                4                4            8
69           9               7                8                7            8
70           9               8                7                3            9
71           8               9                5                2            7
72           5               6                8                0           10
73           8               6               10                4            8
74           9               8                6                2            9
75           7               6                3                3            7
76           6               5                8                1            6
77          10               5                5                3           10
78           7               3                5                2            8
79           6               6                4                4            7
80           6               7                9                2            2
81           7               8                7                4            6
82           9               8                3                0            8
83          10               8                4                4            8
84           7               8               NA                2            6
85           8               8               10                3            8
86           8               8                6                5            8
87           7               9                4                3            6
88           8               3                5                0            8
89           7               6               10                4            7
90           7               8                6                3            8
91           9               9                3                5            7
92           6               6                2                1            7
93           8               7                7                3            9
94           8               9                4                3            7
95           6               6                5                4            7
96           6               8                7                4            5
97           7               6                8                4           NA
98           7               5               10                6            7
99           7               6                5                3            7
100         10               9                8                3            9
101          7               7                9                5            6
102         NA               7                6                3            7
103          8               9                4                2            8
104          8               7                9               10            7
105          8               7                6                4            6
106          8               5                8                1            8
107         10              10                7                4           10
108          5               5                0                5            5
109          9               8                1                1            8
110          7               7                6                2            8
111          5               0                5                0            6
112          6               7                4                3            5
113         NA               7                8                2            7
114          3               4                6                1            2
115          8               8                7                2            9
116         10              10                5                3            9
117          7               6               10                3            7
118          7               7                5                8            6
119          7               7                5                7            7
120          9               3                6                3            2
121          9               6                6                3            7
122         10               7               10                9           10
123          5               6                5                5            5
124          7               8                3                6            7
125          7               7                6                5            6
126          6               6                9                3            7
127          9               5                3                2            9
128          9               6                4                5            7
129          9               8                9                0            7
130          6               6                6                3            7
131          8               8                9                1            8
132          8               7                5                1            8
133          7               5                8                2            6
134          9               4                9                9            8
135          7              10                6                3           10
136         10               8                7                8            8
137          3               3                6                3            6
138         10              10                7                0           10
139          6               6                9                0            7
140          6               5                5                4            4
141          5               4                7                0            3
142          8               8                2                3            9
143          5               4                6                2            5
144          7              10                6                1           10
145          8              10                3                1            8
146          8               9                6                3            9
147          4               7                4                0            3
148         10               8                6                2            9
149          7               7                4                2            7
150          9              10               10               10            9
151          5               5                5                0            8
152         NA              NA               NA               NA           NA
153         NA               2                7                1            6
154          5               4                6                3            8
155          7               5                4                2            6
156          7               5                5                1            5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(HAPPY.df, <span class="at">na.rm =</span> T) <span class="co"># 0 to 10 range means to reverse score I need to subtract variable from 0 + 10 = 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('psych') # only need to do this once!</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych) <span class="co"># do this every time you restart R.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">alpha</span>(HAPPY.df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of categories should be increased  in order to count frequencies. </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: alpha(x = HAPPY.df)

  raw_alpha std.alpha G6(smc) average_r S/N  ase mean  sd median_r
      0.54      0.58     0.6      0.22 1.4 0.06    6 1.2     0.13

    95% confidence boundaries 
         lower alpha upper
Feldt     0.41  0.54  0.64
Duhachek  0.42  0.54  0.66

 Reliability if an item is dropped:
                 raw_alpha std.alpha G6(smc) average_r  S/N alpha se var.r
mini.happy            0.35      0.37    0.36      0.13 0.58    0.087 0.027
mini.selfesteem       0.45      0.49    0.51      0.19 0.97    0.074 0.045
X10...mini.bored      0.62      0.65    0.64      0.32 1.88    0.052 0.053
X10...mini.tired      0.56      0.61    0.61      0.28 1.54    0.061 0.073
mini.satlife          0.43      0.47    0.46      0.18 0.87    0.076 0.033
                 med.r
mini.happy       0.072
mini.selfesteem  0.132
X10...mini.bored 0.331
X10...mini.tired 0.273
mini.satlife     0.132

 Item statistics 
                   n raw.r std.r r.cor r.drop mean  sd
mini.happy       149  0.74  0.80  0.80   0.59  7.4 1.6
mini.selfesteem  153  0.64  0.66  0.56   0.36  6.7 2.1
X10...mini.bored 153  0.48  0.42  0.13   0.10  5.6 2.4
X10...mini.tired 154  0.55  0.50  0.25   0.20  3.2 2.3
mini.satlife     153  0.64  0.69  0.63   0.41  7.1 1.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>HAPPY2.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(mini<span class="sc">$</span>happy, mini<span class="sc">$</span>selfesteem, <span class="dv">10</span><span class="sc">-</span>mini<span class="sc">$</span>tired, mini<span class="sc">$</span>satlife)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">alpha</span>(HAPPY2.df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of categories should be increased  in order to count frequencies. </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: alpha(x = HAPPY2.df)

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean  sd median_r
      0.62      0.65    0.64      0.32 1.9 0.052  6.1 1.3     0.33

    95% confidence boundaries 
         lower alpha upper
Feldt     0.51  0.62  0.71
Duhachek  0.51  0.62  0.72

 Reliability if an item is dropped:
                 raw_alpha std.alpha G6(smc) average_r  S/N alpha se  var.r
mini.happy            0.40      0.42    0.38      0.19 0.73    0.086 0.0454
mini.selfesteem       0.51      0.56    0.54      0.29 1.25    0.072 0.0763
X10...mini.tired      0.76      0.76    0.69      0.52 3.22    0.034 0.0063
mini.satlife          0.49      0.53    0.48      0.27 1.12    0.073 0.0484
                 med.r
mini.happy       0.082
mini.selfesteem  0.222
X10...mini.tired 0.513
mini.satlife     0.222

 Item statistics 
                   n raw.r std.r r.cor r.drop mean  sd
mini.happy       149  0.80  0.83  0.80   0.64  7.4 1.6
mini.selfesteem  153  0.73  0.73  0.59   0.44  6.7 2.1
X10...mini.tired 154  0.55  0.49  0.19   0.14  3.2 2.3
mini.satlife     153  0.71  0.75  0.66   0.48  7.1 1.8</code></pre>
</div>
</div>
</section>
<section id="step-2-create-and-interpret-the-scale" class="level4">
<h4 class="anchored" data-anchor-id="step-2-create-and-interpret-the-scale">STEP 2 : CREATE AND INTERPRET THE SCALE</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(HAPPY2.df, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 6.000000 5.500000 5.500000 7.250000      NaN 6.500000 8.250000 6.000000
  [9] 5.000000 6.500000 3.750000 5.250000 2.750000 6.500000 6.750000 5.000000
 [17] 7.500000 6.000000 6.250000 5.750000 4.750000 5.750000 7.750000 6.000000
 [25] 6.250000 7.250000 6.250000 8.250000 5.750000 6.000000 4.250000 7.500000
 [33] 5.250000 6.500000 6.000000 6.000000 7.000000 8.250000 2.000000 6.500000
 [41] 5.750000 5.750000 7.750000 8.750000 4.500000 3.250000 6.000000 6.750000
 [49] 5.750000 7.000000 8.500000 7.000000 5.750000 7.000000 5.500000 5.000000
 [57] 6.000000 7.000000 5.500000 5.500000 3.750000 7.000000 7.000000 6.750000
 [65] 5.500000 7.250000 3.750000 7.000000 7.750000 7.250000 6.500000 5.250000
 [73] 6.500000 7.000000 5.750000 4.500000 7.000000 5.000000 5.750000 4.250000
 [81] 6.250000 6.250000 7.500000 5.750000 6.750000 7.250000 6.250000 4.750000
 [89] 6.000000 6.500000 7.500000 5.000000 6.750000 6.750000 5.750000 5.750000
 [97] 5.666667 6.250000 5.750000 7.750000 6.250000 5.666667 6.750000 8.000000
[105] 6.250000 5.500000 8.500000 5.000000 6.500000 6.000000 2.750000 5.250000
[113] 5.333333 2.500000 6.750000 8.000000 5.750000 7.000000 7.000000 4.250000
[121] 6.250000 9.000000 5.250000 7.000000 6.250000 5.500000 6.250000 6.750000
[129] 6.000000 5.500000 6.250000 6.000000 5.000000 7.500000 7.500000 8.500000
[137] 3.750000 7.500000 4.750000 4.750000 3.000000 7.000000 4.000000 7.000000
[145] 6.750000 7.250000 3.500000 7.250000 5.750000 9.500000 4.500000      NaN
[153] 3.000000 5.000000 5.000000 4.500000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mini<span class="sc">$</span>HAPPYSCALE <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(HAPPY2.df, <span class="at">na.rm =</span> T)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(mini<span class="sc">$</span>HAPPYSCALE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4L_Scales_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="part-3-project-workshop-you-need-a-likert-scale" class="level2">
<h2 class="anchored" data-anchor-id="part-3-project-workshop-you-need-a-likert-scale">Part 3 : Project Workshop : You Need a Likert Scale!</h2>
<section id="step-1-identify-a-dependent-variable-in-your-model" class="level3">
<h3 class="anchored" data-anchor-id="step-1-identify-a-dependent-variable-in-your-model">Step 1 : Identify a (Dependent) Variable in Your Model</h3>
<ul>
<li>Student Example Go Here</li>
</ul>
</section>
<section id="step-2-measure-this-in-a-continuous-way" class="level3">
<h3 class="anchored" data-anchor-id="step-2-measure-this-in-a-continuous-way">Step 2 : Measure this in a Continuous Way</h3>
<section id="method-1-find-or-adapt-an-existing-scale" class="level4">
<h4 class="anchored" data-anchor-id="method-1-find-or-adapt-an-existing-scale">Method 1 : Find or Adapt an Existing Scale</h4>
<ul>
<li><p><strong>List of (Free) Scales :</strong> <a href="https://ipip.ori.org/newIndexofScaleLabels.htm" class="uri">https://ipip.ori.org/newIndexofScaleLabels.htm</a></p></li>
<li><p><strong>Google/Google Scholar :</strong> add “construct” or “validation” or “scale” to your search</p></li>
</ul>
</section>
<section id="method-2-write-your-own-scale" class="level4">
<h4 class="anchored" data-anchor-id="method-2-write-your-own-scale">Method 2 : Write Your Own Scale</h4>
<ul>
<li><p>Keep items phrased in the same way. (“I am someone who….”)</p></li>
<li><p>Keep items on the same response scale (1-5 or 1-7); usually higher numbers indicate more agreement with the question.</p></li>
<li><p>Make sure to include positive and negatively-keyed items.</p></li>
</ul>
</section>
</section>
<section id="examples-for-mega-class-survey" class="level3">
<h3 class="anchored" data-anchor-id="examples-for-mega-class-survey">Examples for “Mega” Class Survey</h3>
<ul>
<li><p><strong>Love for Water Scale :</strong></p>
<ul>
<li><p>I think water is delicious.</p></li>
<li><p>If I’m thirsty, it’s water I crave.</p></li>
<li><p>I’d rather be thirsty than drink water.</p></li>
<li><p>It’s a chore for me to drink water.</p></li>
</ul></li>
</ul>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
</section>
</section>
<section id="check-out-the-mega-survey" class="level2">
<h2 class="anchored" data-anchor-id="check-out-the-mega-survey"><a href="https://docs.google.com/forms/d/1D6MmrC2wtyz6SW41ONiKlvkXNXWVHTBdxUtrYe_8ras/edit">Check-Out : The Mega Survey</a></h2>
<p><em>wait to do this until professor says.</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>